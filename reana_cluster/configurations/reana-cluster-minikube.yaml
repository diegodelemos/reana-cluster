cluster:
  type: "kubernetes"
  version: "v1.16.3"
  db_config: &db_base_config
    - REANA_DB_NAME: "reana"
    - REANA_DB_HOST: "db"
    - REANA_DB_PORT: "5432"
  root_path: "/var/reana"
  shared_volume_path: "/var/reana"
  db_persistence_path: "/var/reana/db"

components:
  reana-workflow-controller:
    type: "docker"
    image: "reanahub/reana-workflow-controller:latest"
    environment:
      - <<: *db_base_config
      - SHARED_VOLUME_PATH: "/var/reana"
      - REANA_JOB_CONTROLLER_IMAGE: "reanahub/reana-job-controller:latest"
      - REANA_WORKFLOW_ENGINE_IMAGE_CWL: "reanahub/reana-workflow-engine-cwl:latest"
      - REANA_WORKFLOW_ENGINE_IMAGE_YADAGE: "reanahub/reana-workflow-engine-yadage:latest"
      - REANA_WORKFLOW_ENGINE_IMAGE_SERIAL: "reanahub/reana-workflow-engine-serial:latest"

  reana-server:
    type: "docker"
    image: "reanahub/reana-server:latest"
    environment:
      - <<: *db_base_config

  reana-message-broker:
    type: "docker"
    image: "reanahub/reana-message-broker:latest"
