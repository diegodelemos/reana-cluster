cluster:
  type: "kubernetes"
  version: "v1.9.4"
  db_config: &db_base_config
    - REANA_SQLALCHEMY_DATABASE_URI: "postgresql+psycopg2://reanauser:reana@db:5432/reana"
  root_path: "/volumes/_nogroup/04d2ac87-f493-4de0-85b9-c7733433775d"
  cephfs_monitors:
    - 188.184.86.25:6790
    - 188.184.94.56:6790
    - 188.185.66.208:6790

components:
  reana-workflow-controller:
    type: "docker"
    image: "dinossimpson/reana-workflow-controller:latest"
    environment:
      - <<: *db_base_config
      - SHARED_VOLUME_PATH: "/reana"
      - ORGANIZATIONS: "default,alice,atlas,cms,lhcb"

  reana-job-controller:
    type: "docker"
    image: "reanahub/reana-job-controller:latest"
    environment:
      - <<: *db_base_config
      - REANA_STORAGE_BACKEND: "LOCAL"

  reana-server:
    type: "docker"
    image: "dinossimpson/reana-server:latest"
    environment:
      - <<: *db_base_config

  reana-message-broker:
    type: "docker"
    image: "reanahub/reana-message-broker:latest"

  reana-workflow-monitor:
    type: "docker"
    image: "reanahub/reana-workflow-monitor:latest"
    environment:
      - ZMQ_PROXY_CONNECT: "tcp://zeromq-msg-proxy.default.svc.cluster.local:8667"

  reana-workflow-engine-yadage:
    type: "docker"
    image: "dinossimpson/reana-workflow-engine-yadage:latest"
    environment:
      - <<: *db_base_config
      - ZMQ_PROXY_CONNECT: "tcp://zeromq-msg-proxy.default.svc.cluster.local:8666"

  reana-workflow-engine-cwl:
    type: "docker"
    image: "dinossimpson/reana-workflow-engine-cwl:latest"
    environment:
      - <<: *db_base_config
      - ZMQ_PROXY_CONNECT: "tcp://zeromq-msg-proxy.default.svc.cluster.local:8666"

  reana-workflow-engine-serial:
    type: "docker"
    image: "dinossimpson/reana-workflow-engine-serial:latest2"
    environment:
      - ZMQ_PROXY_CONNECT: "tcp://zeromq-msg-proxy.default.svc.cluster.local:8666"
